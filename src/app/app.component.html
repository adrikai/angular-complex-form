<div class="flex justify-center p-12 mt-32 ml-64 mr-64 rounded bg-slate-100">
  <form class="w-full max-w-lg" (ngSubmit)="onSubmit()" [formGroup]="schoolForm">
    <div class="flex flex-wrap mb-6">
      <div class="flex flex-nowrap">
        <div class="w-full px-3 mt-6 mb-6 md:w-1/2 md:mb-0">
          <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">Name</label>
          <input
            class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
            type="text" placeholder="Name" id="name" formControlName="name" />
        </div>
        <div class="w-full px-3 mt-6 mb-6 md:w-1/2 md:mb-0">
          <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">
            Email
          </label>
          <input
            class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
            type="email" placeholder="Email" id="email" formControlName="emailAddress" />
        </div>
        <div class="w-full px-3 mt-6 mb-6 md:w-1/2 md:mb-0">
          <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">Phone Number</label>
          <input
            class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
            type="text" placeholder="Phone Number" id="phone" formControlName="phoneNumber" />
        </div>
      </div>
      <div formGroupName="address" class="w-full mt-6">
        <h2 class="block mb-2 text-sm font-bold tracking-wide text-gray-700 uppercase">
          Address:
        </h2>
        <div class="flex flex-wrap">
          <div class="w-full px-3 mt-5 mb-6 md:w-1/2 md:mb-0">
            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase"
              for="street">Street</label>
            <input
              class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
              type="text" placeholder="Street" id="street" formControlName="street" />
          </div>
          <div class="w-full px-3 mt-5 mb-6 md:w-1/2 md:mb-0">
            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="city">City</label>
            <input
              class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
              type="text" placeholder="City" id="city" formControlName="city" />
          </div>
          <div class="w-full px-3 mt-5 mb-6 md:w-1/2 md:mb-0">
            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase" for="state">State</label>
            <input
              class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
              type="text" placeholder="State" id="state" formControlName="state" />
          </div>
          <div class="px-3 mt-5 mb-6 -full md:w-1/2 md:mb-0">
            <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase"
              for="country">Country</label>
            <input
              class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
              type="text" placeholder="Country" id="country" formControlName="country" />
          </div>
        </div>
      </div>
    </div>
    <div>
      <h2 class="block mb-2 text-sm font-bold tracking-wide text-gray-700 uppercase">
        Students:
      </h2>
      <div class="flex justify-end w-full">
        <button type="button" class="px-2 py-1 font-semibold text-white bg-gray-400 rounded hover:bg-gray-700"
          (click)="addStudent()">
          Add Student
        </button>
      </div>
      <div formArrayName="students">
        <div *ngFor="
            let student of studentArray.controls;
            let studentIndex = index
          ">
          <div [formGroupName]="studentIndex">
            <table>
              <tr>
                <td>
                  <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">Name</label>
                  <input
                    class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
                    type="text" placeholder="Name" formControlName="name" />
                </td>
                <td>
                  <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">Email</label>
                  <input
                    class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
                    type="text" placeholder="Email" formControlName="emailAddress" />
                </td>
                <td>
                  <button type="button"
                    class="px-2 py-2 mt-5 text-gray-800 bg-gray-300 rounded-full font-xs hover:bg-gray-400"
                    (click)="addSkill(studentIndex)">
                    +
                  </button>
                </td>
                <td>
                  <button type="button"
                    class="px-2 py-2 mt-5 text-gray-800 bg-gray-300 rounded-full font-xs hover:bg-gray-400"
                    (click)="removeStudent(studentIndex)">
                    Remove
                  </button>
                </td>
              </tr>
            </table>
            <div class="my-4 ml-4">
              <table class="border-separate border-spacing-y-4" formArrayName="skills">
                <tr *ngFor="
                    let skill of skillArray(studentIndex).controls;
                    let skillIndex = index
                  " [formGroupName]="skillIndex">
                  <td>
                    <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">Name:
                    </label><input
                      class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
                      type="text" formControlName="name" />
                  </td>
                  <td>
                    <label class="block mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase">Level:
                    </label><input
                      class="block w-full px-4 py-3 leading-tight text-gray-700 bg-gray-200 border border-gray-200 rounded appearance-none focus:outline-none focus:bg-white focus:border-gray-500"
                      type="number" formControlName="level" min="0" max="10" />
                  </td>
                  <td>
                    <button type="button"
                      class="px-2 py-2 mt-5 text-gray-800 bg-gray-300 rounded-full font-xs hover:bg-gray-400"
                      (click)="removeSkill(studentIndex, skillIndex)">
                      Remove
                    </button>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <div class="flex flex-col w-full mt-10 align-middle">
      <div class="flex w-full space-x-40">
        <button
          class="px-2 py-2 text-sm text-gray-700 bg-transparent border border-gray-500 rounded hover:bg-gray-500 hover:text-white hover:border-transparent"
          (click)="patchForm()" type="submit">
          PatchValue</button><br /><br />
        <button
          class="px-2 py-2 text-sm text-gray-700 bg-transparent border border-gray-500 rounded hover:bg-gray-500 hover:text-white hover:border-transparent"
          (click)="clearForm()" type="submit">
          ClearForm
        </button>
      </div>
      <div class="w-full mt-6">
        <button class="w-2/3 px-2 py-2 text-sm bg-gray-300 rounded hover:bg-gray-400 hover:text-white" type="submit">
          Submit
        </button>
      </div>
    </div>
  </form>
</div>
